import{g as m}from"./get-prompt-c4dadeb6.js";import{g as f}from"./get-user-config-095b2c2d.js";import"./storage-0924aca3.js";import"./default-user-config-22e12d79.js";async function b(){let t=0;const r=setInterval(n,1500);async function n(){var l,c;if(t++,t>=10&&clearInterval(r),window.location.pathname!="/new")return;const i=await m();if(!i||i==""||!document.querySelector(".ProseMirror"))return;await u(i,1e3),clearInterval(r);const d=await f(),a=Object.values(d.followupPrompts).filter(e=>e!=="");if(a.length===0||(await new Promise(e=>setTimeout(e,2e3)),!document.querySelector(".ProseMirror")))return;const p=a.length<=2?2:3;(c=(l=document.querySelector(".ProseMirror"))==null?void 0:l.parentElement)==null||c.insertAdjacentHTML("afterend",`<div style="display: grid;grid-template-columns: repeat(${p}, 1fr);width: 100%;gap: 8px;margin-bottom:16px;">
            ${a.map(e=>g(e)).join("")}
        </div>`),document.querySelectorAll(".glasp_ext_next_prompts").forEach(e=>{e.addEventListener("click",o=>{o.target&&"innerText"in o.target&&u(o.target.innerText,300)}),e.addEventListener("mouseover",()=>{const o=e;o.style.backgroundColor="#ececf1"}),e.addEventListener("mouseout",()=>{const o=e;o.style.backgroundColor="#FFFFFF"})})}}async function u(t,s){const r=document.querySelector(".ProseMirror");r&&(r.innerHTML=`<p>${t}</p>`,r.focus(),r.dispatchEvent(new Event("input",{bubbles:!0}))),await new Promise(i=>setTimeout(i,s));const n=document.querySelector('button[aria-label="Send Message"]')||document.querySelector("fieldset button")||document.querySelector("button");n&&(n.disabled=!1,n.click())}const g=t=>`
    <div class="glasp_ext_next_prompts" style="padding: 8px 16px; border-radius: 0.25rem; border: 1px solid rgba(0,0,0,.1); font-size: 14px;cursor: pointer;color: #40414F;line-height: 1.35em;background-color: #FFFFFF;user-select: none;" title="${t}">
        <div style="display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; white-space: break-spaces; text-overflow: ellipsis;">${t}</div>
    </div>`;b();
